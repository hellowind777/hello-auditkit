# GPT-5.2 提示词标准

> **来源**：[GPT-5.2 Prompting Guide](https://github.com/openai/openai-cookbook/blob/main/examples/gpt-5/gpt-5-2_prompting_guide.ipynb)
> **何时读取**：审计任何非脚本文本内容（提示词、指令、规则、记忆文件、技能正文、代理正文、命令正文）
> **适用于**：所有包含 AI 指令或规则的文本内容

## 目录

- [核心原则](#核心原则)
- [约束规范](#约束规范)
- [结构化标签块](#结构化标签块)
- [反模式](#反模式)
- [多阶段规则](#多阶段规则)
- [工具使用规则](#工具使用规则)
- [长上下文处理](#长上下文处理)
- [结构化输出](#结构化输出)
- [审计检查清单](#审计检查清单)

---

## 核心原则

> GPT-5.2 强调"更高的准确性、更强的指令遵循和更有纪律的执行"。

### 关键特征

| 特征 | 含义 | 审计重点 |
|------|------|----------|
| 刻意的脚手架 | 受益于显式约束 | 检查显式范围/详尽度 |
| 较低详尽度 | 默认更简洁 | 仍需显式偏好设置 |
| 更强的指令遵循 | 更少偏离意图 | 验证约束是否清晰 |
| 保守的接地偏好 | 偏向正确性 | 检查接地指令 |

### 基本规则

1. **显式优于隐式** - 清晰表达偏好，不要假设 AI 知道你的风格
2. **约束驱动** - 使用显式的范围、详尽度、格式约束
3. **验证导向** - 为高风险输出添加自检步骤
4. **最小解释** - "如有歧义，选择最简单的有效解释"
5. **范围纪律** - "实现恰好且仅限于请求的内容"

---

## 约束规范

### 详尽度控制（关键）

> **审计规则**：所有提示词/指令必须有显式的详尽度约束或暗示长度的示范性示例。

| 上下文 | 推荐约束 | 示例 |
|--------|----------|------|
| 简单是/否 | ≤2 句 | "用 ≤2 句回答" |
| 默认响应 | 3-6 句或 ≤5 条要点 | "用 3-6 句回应" |
| 复杂任务 | 1 概述 + ≤5 标签要点 | "概述 + 要点：什么、哪里、风险、下一步、待定" |
| 长篇内容 | 显式字数/章节限制 | "≤500 字，最多 3 个章节" |

**审计检查**：

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 有显式长度限制 | 缺失则 Severe | 存在"≤N 句/要点/字" |
| 定义默认详尽度 | 缺失则 Warning | 无特定请求时怎么做 |
| 复杂任务结构 | Info | 多部分任务有标签要点 |

### 范围纪律（关键）

> **审计规则**：所有提示词/指令必须有显式的范围边界或"禁止"约束。

**必需模式**：
```
实现恰好且仅限于请求的内容。
禁止添加：[具体禁止项]
禁止：[具体禁止行为]
```

**审计检查**：

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 有"禁止"约束 | 缺失则 Severe | 列出显式禁止行为 |
| 范围边界清晰 | 缺失则 Severe | 什么在范围内什么不在 |
| 防止功能蔓延 | 缺失则 Warning | "仅限请求内容"或等效表达 |

### 停止条件（多阶段）

> **审计规则**：多阶段内容必须在阶段门处有显式停止条件。

<stop_condition_analysis>
"停止条件是否有效"的推理过程：
- 强：" 在此停止。不要继续直到..." → 高效性
- 中："停止并等待用户。" → 中等效性
- 弱："然后等待..." → 低效性 - AI 可能继续
- 无：无停止指令 → 很低效性
</stop_condition_analysis>

| 强度 | 模式 | 效性 |
|------|------|------|
| 强 | "在此停止。不要继续直到..." | 高 |
| 中 | "停止并等待用户。" | 中 |
| 弱 | "然后等待..." | 低 - AI 可能继续 |
| 无 | 无停止指令 | 很低 |

**审计检查**：

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 存在停止条件 | 缺失则 Severe | 阶段门处有显式停止 |
| 停止条件强度 | 弱则 Severe | 强语言带禁止 |

### 约束集中

> **审计规则**：关键约束必须集中在 ≤3 个位置，最好在顶部。

<constraint_centralization_analysis>
约束集中判断需要分析：
- 关键规则是否集中在顶部的专用块中？
- 关键规则是否分散在 >3 个位置？
- 分散的规则导致选择性遵守，执行力减弱
- 关键规则仅在底部风险很高
</constraint_centralization_analysis>

| 模式 | 风险级别 | 行动 |
|------|----------|------|
| 所有关键规则在顶部专用块 | 低 | 好 |
| 关键规则在 2-3 个位置 | 中 | 可接受 |
| 关键规则分散（>3 个位置）| 高 | 必须整合 |
| 关键规则仅在底部 | 很高 | 移到顶部 |

**审计检查**：

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 约束已集中 | 分散则 Severe | 规则在 ≤3 个位置 |
| 约束在顶部 | 在底部则 Severe | 在文档前 20% |

### 禁止语言强度

> **审计规则**：关键约束必须使用强禁止语言。

| 强度 | 模式 | 使用时机 |
|------|------|----------|
| 强 | "禁止"、"绝不"、"必须不"、"Do NOT"、"NEVER"、"MUST NOT" | 关键约束 |
| 中 | "不要"、"避免"、"不应该"、"don't"、"avoid" | 偏好设置 |
| 弱 | "尽量不要"、"最好不" | 仅建议 |

**审计检查**：

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 关键约束用强禁止 | 弱则 Warning | 关键规则用"禁止"/"绝不" |
| 范围控制有强语言 | 缺失则 Severe | 范围有强禁止 |

---

## 结构化标签块

> **来源**：GPT 指南使用尖括号标签对约束进行分组，以提高清晰度和复制粘贴可靠性。
> **注意**：标签名称可自定义 - 审计检查结构化分组存在性，而非特定标签名称。

### 推荐的标签结构

```xml
<output_verbosity_spec>
默认：3-6 句或 ≤5 条要点。
简单问题：≤2 句。
复杂任务：1 概述 + ≤5 标签要点。
</output_verbosity_spec>

<design_and_scope_constraints>
实现恰好且仅限于请求的内容。
禁止添加：额外功能、不受控的样式、新 UI 元素。
禁止：扩大问题范围。
</design_and_scope_constraints>

<uncertainty_and_ambiguity>
如不清楚：提供 1-3 个澄清问题或 2-3 个带假设标签的解释。
绝不编造精确数字、行号或外部引用。
</uncertainty_and_ambiguity>

<tool_usage_rules>
对于新鲜数据优先使用工具而非内部知识。
并行化独立的读取操作。
写入后重述：改了什么、在哪里、执行了什么验证。
</tool_usage_rules>

<long_context_handling>
对于 >10k token：先产生内部大纲。
回答前重述用户约束。
用引用将声明锚定到具体章节。
</long_context_handling>
```

### 按提示词类型的标签适用性

| 提示词类型 | 推荐标签 | 缺失时严重性 |
|------------|----------|--------------|
| 所有有详尽度规则的 | `<*_verbosity_*>` 或类似 | Info |
| 所有有范围规则的 | `<*_scope_*>` 或 `<*_constraints>` | Info |
| 代理式/多阶段 | `<*_updates_*>` 或 `<*_communication_*>` | Warning |
| 数据提取 | `<*_extraction_*>` 或 `<*_schema_*>` | Warning |
| 事实性/接地 | `<*_grounding_*>` 或 `<*_uncertainty_*>` | Info |
| 使用工具的 | `<*_tool_*>` | Info |
| 长上下文（>10k）| `<*_context_*>` | Info |
| 高风险内容 | `<*_validation_*>` 或 `<*_self_check_*>` | Info |

### 标签审计检查

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 复杂提示词有结构化标签 | 缺失则 Warning | 存在尖括号标签 |
| 标签内容匹配目的 | 不匹配则 Warning | 详尽度标签有长度规则，不是范围 |
| 无语法错误 | Warning | 标签正确闭合 |
| 无冗余标签 | Info | 无重复目的的标签 |

---

## 反模式

> **来源**：GPT-5.2 故障排除指南 - 官方警告

### 措辞反模式

| 反模式 | 示例 | 问题原因 | 严重性 |
|--------|------|----------|--------|
| 填充短语 | "深呼吸"、"你是世界级专家" | 现代 LLM 视为噪音 | Warning |
| 模糊详尽度 | "简洁些"、"保持简短" | 无可衡量的约束 | Warning |
| 绝对声明 | "总是"、"从不"、"保证"（无限定）| 缺乏接地 | Warning |
| 最大化语言 | "分析所有内容"、"彻底些" | 导致过度思考/过度调用工具 | Warning |

### 结构反模式

| 反模式 | 问题原因 | 严重性 |
|--------|----------|--------|
| 矛盾指令 | 浪费推理 token 去调和 | Severe |
| 分散约束 | 选择性遵守，执行力减弱 | Severe |
| 弱禁止语言 | 不如强禁止有效 | Warning |
| 软停止条件 | AI 可能无视指令继续 | Severe |
| 无清晰完成定义 | 导致过度思考 | Warning |

### 行为反模式

| 反模式 | 问题原因 | 严重性 |
|--------|----------|--------|
| 叙述常规工具调用 | 不必要的冗长 | Warning |
| 扩展任务范围 | 功能蔓延 | Severe |
| 编造精确数字 | 幻觉风险 | Severe |
| 重述用户请求 | 可能改变语义 | Warning |

---

## 多阶段规则

> **适用于**：有多阶段、用户交互循环或条件执行的提示词。

### 关键要求

| 要求 | 重要原因 | 严重性 |
|------|----------|--------|
| 关键约束在顶部 | 分散规则被选择性遵守 | Severe |
| 显式停止条件 | 模糊停止语言允许 AI 继续 | Severe |
| 防止范围漂移 | AI 倾向于添加未请求的功能 | Severe |
| 阶段门条件 | 无显式触发器 AI 可能跳过阶段 | Severe |

### 更新规则

| 规则 | 要求 | 严重性 |
|------|------|--------|
| 简短更新 | 仅 1-2 句 | Warning |
| 仅主要阶段 | 不是常规工具调用 | Warning |
| 具体结果 | 每次更新有具体结果 | Warning |
| 无叙述 | 避免"自言自语" | Info |

### 审计检查

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 约束在顶部 | 在底部则 Severe | 在文档前 20% |
| 门处有停止条件 | 缺失则 Severe | 显式停止 + 禁止 |
| 定义更新规则 | 缺失则 Warning | 简短、主要阶段、具体 |

---

## 工具使用规则

> **适用于**：涉及工具调用的内容。

### 必需模式

| 模式 | 要求 | 严重性 |
|------|------|--------|
| 工具偏好 | 对于新鲜数据优先使用工具而非内部知识 | Warning |
| 并行化 | 并行化独立的读取操作 | Info |
| 写入确认 | 写入后重述：改了什么、在哪里、验证 | Warning |
| 验证 | 高影响操作需要验证 | Warning |

### 审计检查

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 说明工具偏好 | 缺失则 Warning | "优先使用工具"或等效表达 |
| 并行化指导 | Info | 独立操作"并行化" |
| 写入确认规则 | 缺失则 Warning | 写入后重述更改 |

---

## 长上下文处理

> **适用于**：处理 >10k token 的内容。

### 必需模式

| 步骤 | 行动 | 目的 |
|------|------|------|
| 1 | 产生内部大纲 | 导航大型输入 |
| 2 | 重述用户约束 | 防止漂移 |
| 3 | 将声明锚定到章节 | 接地 |
| 4 | 引用细节 | 准确性 |

### 审计检查

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 大纲指令 | 缺失则 Warning | >10k 时"产生大纲" |
| 约束重述 | 缺失则 Warning | "重述约束" |
| 章节锚定 | 缺失则 Warning | "锚定到章节" |

---

## 结构化输出

> **适用于**：数据提取和结构化输出任务。

### 必需模式

| 模式 | 要求 | 严重性 |
|------|------|--------|
| 提供 Schema | 始终提供 JSON 形状/结构 | Severe |
| 字段区分 | 标记必需 vs 可选 | Warning |
| Null 处理 | 缺失 → null，不猜测 | Warning |
| 返回前重扫 | 检查遗漏字段 | Info |

### 审计检查

| 检查 | 严重性 | 通过标准 |
|------|--------|----------|
| 定义 Schema | 缺失则 Severe | JSON 结构或格式规范 |
| 标记必需/可选 | 缺失则 Warning | 字段要求清晰 |
| 定义 Null 处理 | 缺失则 Warning | "缺失用 null"或等效表达 |

---

## 审计检查清单

### Fatal 问题

- [ ] 无矛盾指令
- [ ] 无不可能的约束
- [ ] 存在关键上下文

### Severe 问题（必须修复）

- [ ] 存在详尽度约束（显式长度限制）
- [ ] 定义范围边界（什么在范围内什么不在）
- [ ] 存在"禁止"约束（禁止行为）
- [ ] 阶段门有停止条件（仅多阶段）
- [ ] 约束已集中（≤3 个位置）
- [ ] 无编造指令（接地）
- [ ] 结构化输出有 Schema

### Warning（应该修复）

- [ ] 关键约束有强禁止语言
- [ ] 复杂提示词有结构化标签块
- [ ] 说明工具偏好
- [ ] 写入确认规则
- [ ] 长上下文处理（>10k）
- [ ] 高风险内容有自检
- [ ] 无反模式措辞

### Info（可选）

- [ ] 复杂任务有标签要点
- [ ] 并行化指导
- [ ] 额外示例
