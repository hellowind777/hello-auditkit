# 格式与编码检查项注册表

> **唯一权威定义**：所有格式与编码检查项在此定义，其他文件只能引用ID。
> **适用范围**：ALL = 所有类型 | S = Skill | P = Plugin | M = Memory

## 检查项列表

### Frontmatter验证 (F-0xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| F-001 | 必需字段存在 | 必须存在且非空 | Fatal/Severe | S,P |
| F-002 | name字段 | kebab-case，适当长度 | Warning | S,P |
| F-003 | description字段 | 包含触发条件，简洁 | Severe | S,P |
| F-004 | 有效YAML | 可解析，语法正确 | Fatal | S,P |

### Markdown结构 (F-1xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| F-101 | 标题层级 | H1→H2→H3 (不跳级) | Warning | ALL |
| F-102 | 表格格式 | 有效markdown表格 | Warning | ALL |
| F-103 | 代码块 | 正确的语言标签 | Info | ALL |
| F-104 | 链接 | 有效的内部/外部链接 | Warning | ALL |

### 命名约定 (F-2xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| F-201 | 目录 | kebab-case | Warning | S,P |
| F-202 | 文件 | kebab-case (SKILL.md除外) | Warning | S,P |
| F-203 | 无空格 | 使用连字符代替 | Severe | ALL |
| F-204 | 无特殊字符 | 仅字母、数字、连字符 | Severe | ALL |
| F-205 | 文件编码 | UTF-8无BOM | Warning | ALL |

### 图表验证 (F-3xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| F-301 | 节点名匹配文本 | 图表节点 = 文本描述 | Severe | ALL |
| F-302 | 流程路径匹配规则 | 图表路径 = 文档化流程 | Severe | ALL |
| F-303 | 所有路径已文档化 | 每个图表路径有描述 | Warning | ALL |
| F-304 | 无未文档化节点 | 每个节点有解释 | Warning | ALL |
| F-305 | 条件匹配 | 决策条件一致 | Severe | ALL |

### 流程图逻辑 (F-4xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| F-401 | 所有路径有端点 | 无悬空分支 | Fatal | ALL |
| F-402 | 无无限循环 | 所有循环有退出条件 | Fatal | ALL |
| F-403 | 决策完整性 | 所有决策分支都处理 | Severe | ALL |
| F-404 | 开始/结束节点存在 | 清晰的入口和出口 | Warning | ALL |
| F-405 | 符号一致 | 全文同样符号 | Info | ALL |

### Mermaid/图表语法 (F-5xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| F-501 | 有效语法 | 无错误渲染 | Severe | ALL |
| F-502 | 节点ID匹配引用 | 引用的节点存在 | Severe | ALL |
| F-503 | 边标签清晰 | 条件可读 | Info | ALL |

### 国际化 (F-6xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| F-601 | 无硬编码用户文本 | 使用变量/模板 | Warning | ALL |
| F-602 | 无固定语言输出示例 | 使用 `{example_output}` 占位符 | Warning | ALL |
| F-603 | 语言无关规则 | 规则不假设特定语言 | Info | ALL |
| F-604 | BCP 47语言标签 | 标准格式如 `zh-CN`, `en-US` | Warning | ALL |

### 尺寸阈值 (F-7xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| F-701 | SKILL.md正文 ≤500行 | 官方要求 | - | S |
| F-702 | SKILL.md正文 500-550行 | 可接受 (≤10%超出) | 不是问题 | S |
| F-703 | SKILL.md正文 550-625行 | 可接受 (10-25%超出) | Info | S |
| F-704 | SKILL.md正文 >625行 | 应优化 | Warning | S |
| F-705 | 引用文件 ≤300行 | 理想 | - | S,P |
| F-706 | 引用文件 300-500行 | 可接受 | - | S,P |
| F-707 | 引用文件 500-800行 | 考虑拆分 | Info | S,P |
| F-708 | 引用文件 >800行 | 应拆分或去重 | Warning | S,P |

## 执行方法

```
1. 验证Frontmatter：必需字段、YAML语法
2. 检查Markdown结构：标题层级、表格、代码块、链接
3. 验证命名约定：目录、文件、编码
4. 如有图表：验证节点、路径、逻辑
5. 检查尺寸阈值：正文、引用
6. 输出：「格式检查: Frontmatter N问题; Markdown M问题; 命名K问题; 尺寸L问题」
```

## 不应标记的情况

### 尺寸容忍

- ≤10%超出推荐 → **不是问题**
- 504/500行 → **不是问题** (仅0.8%超出)
- 520/500行 → **不是问题** (仅4%超出)

### 国际化例外

**不要标记：**
- 许可证/版权声明
- 技术术语 (API, JSON等)
- 展示语法的代码示例 (非内容)
- 变量/函数名
- 调试日志消息
- 官方文档/规范/标准内容
- 必要的禁止规则
- 必要的澄清示例
