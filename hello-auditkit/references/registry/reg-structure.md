# 结构完整性检查项注册表

> **唯一权威定义**：所有结构完整性检查项在此定义，其他文件只能引用ID。
> **适用范围**：ALL = 所有类型 | S = Skill | P = Plugin | M = Memory

## 检查项列表

### 文件结构 (S-0xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| S-001 | 必需文件存在 | 所有声明/期望的文件存在 | Severe | S,P |
| S-002 | 无孤立文件 | 所有文件被引用或文档化 | Warning | S,P |
| S-003 | 无空文件 | 所有文件有实质内容 | Warning | ALL |
| S-004 | 命名模式一致 | 全文件同一命名规范 | Warning | S,P |
| S-005 | 目录结构匹配TOC | 如有TOC，结构对齐 | Warning | S,P |

### 规则顺序与层级 (S-1xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| S-101 | 前置条件优先 | 依赖规则在被依赖规则之后 | Warning | ALL |
| S-102 | 通用优先特殊 | 基础规则在例外之前 | Warning | ALL |
| S-103 | TOC顺序匹配内容 | 节按TOC顺序出现 | Warning | ALL |
| S-104 | 标题层级 | H1→H2→H3 (不跳级) | Warning | ALL |
| S-105 | 父子正确 | 子规则在正确父级下 | Severe | ALL |
| S-106 | 无孤立子规则 | 所有子规则有有效父级 | Warning | ALL |
| S-107 | 无空父级 | 父级节有子内容 | Warning | ALL |
| S-108 | 无层级跳跃 | 1 → 1.1 → 1.1.1，非 1 → 1.1.1 | Warning | ALL |

### 重复检测 (S-2xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| S-201 | 无完全相同规则 | 同文字不重复 | Warning | ALL |
| S-202 | 无语义重复 | 不同措辞，同意图 | Warning | ALL |
| S-203 | 无重叠规则 | 规则不覆盖相同情况 | Warning | ALL |

### 规则有效性 (S-3xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| S-301 | 句子完整 | 规则语法完整 | Warning | ALL |
| S-302 | 主语清晰 | 规则适用对象清晰 | Warning | ALL |
| S-303 | 动作清晰 | 做什么/不做什么清晰 | Warning | ALL |
| S-304 | 无截断 | 规则未在句中截断 | Severe | ALL |
| S-305 | 无矛盾 | 规则不冲突 | Fatal | ALL |
| S-306 | 无不可能条件 | 规则可实现 | Fatal | ALL |
| S-307 | 无循环逻辑 | 规则不创建循环 | Fatal | ALL |
| S-308 | 条件完整 | If-then 规则两部分都有 | Severe | ALL |

### 示例-规则一致性 (S-4xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| S-401 | 格式匹配 | 示例格式符合规则 | Severe | ALL |
| S-402 | 值约束 | 示例值满足约束 | Severe | ALL |
| S-403 | 术语匹配 | 示例与规则用语一致 | Warning | ALL |
| S-404 | 结构匹配 | 示例结构遵循规则 | Severe | ALL |
| S-405 | 无过时模式 | 示例使用当前模式 | Warning | ALL |

### 节结构 (S-5xx)

| ID | 检查项 | 要求 | 严重性 | 适用 |
|----|--------|------|--------|------|
| S-501 | TOC存在 (>100行) | 大文件有目录导航 | Info | ALL |
| S-502 | TOC-内容匹配 | 每个TOC条目有对应标题 | Warning | ALL |
| S-503 | 逻辑分组 | 相关内容放一起 | Warning | ALL |
| S-504 | 清晰边界 | 节分隔清晰 | Info | ALL |
| S-505 | 无孤立节 | 所有节被整合 | Warning | ALL |

## 执行方法

```
1. 验证文件结构：必需文件、孤立文件、空文件
2. 检查顺序层级：前置条件、标题层级、父子关系
3. 检测重复：完全重复、语义重复、重叠
4. 验证规则有效性：完整性、矛盾、循环
5. 检查示例一致性：格式、值、术语
6. 输出：「结构检查: 文件N/M问题; 规则K问题; 示例L问题」
```

## 解决方案

| 问题类型 | 解决方案 |
|----------|----------|
| 完全重复 | 删除一个副本 |
| 语义重复 | 合并为单一规则 |
| 重叠规则 | 修改以明确边界 |
| 矛盾规则 | 解决冲突或添加优先级 |
