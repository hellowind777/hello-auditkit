# Plugin审计执行清单

> **内容类型**：Plugin（包含.claude-plugin/plugin.json的目录）
> **执行方式**：按ID加载对应注册表，执行所有列出的检查项

## 必须执行的检查项

### 1. Plugin特定检查 (reg-plugin.md) - 优先

| ID | 检查项 | 条件 |
|----|--------|------|
| G-001 | Manifest位置 | 总是 |
| G-002 | 组件目录位置 | 总是 |
| G-003 | Skill文件命名 | 如有skills |
| G-004 | Command/Agent格式 | 如有commands/agents |
| G-005 | Hooks格式 | 如有hooks |
| G-006 | 路径引用 | 总是 |
| G-007 | 命名 | 总是 |
| G-101 | name字段 | 总是 |
| G-102 | name长度 | 总是 |
| G-103 | version格式 | 如有version |
| G-104 | description长度 | 如有description |
| G-105 | 自定义路径 | 如有自定义路径 |
| G-704 | 无硬编码绝对路径 | 总是 |
| G-705 | 无工作目录相对路径 | 总是 |
| G-706 | 无Home快捷方式 | 总是 |

### 2. 命名检查 (reg-naming.md)

| ID | 检查项 | 条件 |
|----|--------|------|
| N-001 | 命名风格一致 | 总是 |
| N-002 | kebab-case标识符 | 总是 |
| N-003 | 无空格特殊字符 | 总是 |
| N-005 | 无重复名称 | 总是 |
| N-008 | 无跨文件命名冲突 | 总是 |
| N-009 | 无保留字覆盖 | 总是 |
| N-010 | 命令名唯一 | 如有commands |
| N-011 | Agent名称规范 | 如有agents |
| N-012 | Hook事件名有效 | 如有hooks |
| N-013 | MCP服务器名唯一 | 如有MCP |

### 3. 引用检查 (reg-reference.md)

| ID | 检查项 | 条件 |
|----|--------|------|
| R-101 | 命名引用存在 | 总是 |
| R-104 | 跨文件引用有效 | 总是 |
| R-105 | 相对路径解析 | 总是 |
| R-108 | 变量引用已定义 | 如有变量 |
| R-303 | 无循环引用 | 总是 |
| R-304 | 无冲突引用 | 总是 |

### 4. 结构检查 (reg-structure.md)

| ID | 检查项 | 条件 |
|----|--------|------|
| S-001 | 必需文件存在 | 总是 |
| S-002 | 无孤立文件 | 总是 |
| S-004 | 命名模式一致 | 总是 |
| S-305 | 无矛盾 | 总是 |
| S-401 | 格式匹配 | 如有示例 |

### 5. Prompt质量检查 (reg-prompt.md)

| ID | 检查项 | 条件 |
|----|--------|------|
| P-001 | 详尽约束 | commands/agents body |
| P-002 | 范围边界 | commands/agents body |
| P-005 | 无AI已知内容 | 总是 |
| P-201 | 约束集中 | 总是 |
| P-301 | 工具优先 | 如有工具使用 |
| P-401 | 简短更新 | 如是Agentic |
| P-403 | 无任务扩展 | agents body |
| P-705 | 无未闭合标签 | 如有标签 |
| P-805 | 无矛盾指令 | 总是 |

### 6. 安全检查 (reg-security.md)

| ID | 检查项 | 条件 |
|----|--------|------|
| X-001 | 无硬编码密钥 | 总是 |
| X-002 | 无暴露凭证 | 总是 |
| X-003 | 路径遍历防护 | 如有脚本 |
| X-005 | 命令注入防护 | 如有脚本 |
| X-006 | 无硬编码绝对路径 | 总是 |
| X-201 | Shell变量引用 | 如有shell脚本 |
| X-302 | 文件打开编码 | 如有python脚本 |

### 7. 运行时检查 (reg-runtime.md)

| ID | 检查项 | 条件 |
|----|--------|------|
| T-001 | 同概念同术语 | 总是 |
| T-101 | 无名称冲突 | 总是 |
| T-201 | 无矛盾规则 | 总是 |
| T-203 | 无无限循环 | 如有循环逻辑 |
| T-204 | 无死端 | 如有流程 |
| T-A01 | 核心内容在L1/L2 | 如有skills |
| T-A04 | 脚本可调用 | 如有脚本 |

### 8. 格式检查 (reg-format.md)

| ID | 检查项 | 条件 |
|----|--------|------|
| F-001 | 必需字段存在 | 总是 |
| F-004 | 有效YAML/JSON | 总是 |
| F-101 | 标题层级 | 如有markdown |
| F-205 | 文件编码 | 总是 |

### 9. 语言检查 (reg-language.md)

| ID | 检查项 | 条件 |
|----|--------|------|
| L-001 | 措辞清晰 | 总是 |
| L-201 | 同概念同术语 | 总是 |
| L-303 | 无冗余解释 | 总是 |

## 组件特定检查项

### Commands (commands/*.md)

| ID | 检查项 |
|----|--------|
| G-201~G-207 | Commands验证 |

### Agents (agents/*.md)

| ID | 检查项 |
|----|--------|
| G-301~G-308 | Agents验证 |

### Hooks (hooks/hooks.json)

| ID | 检查项 |
|----|--------|
| G-401~G-409 | Hooks验证 |

### MCP Servers (.mcp.json)

| ID | 检查项 |
|----|--------|
| G-501~G-506 | MCP验证 |

### LSP Servers (.lsp.json)

| ID | 检查项 |
|----|--------|
| G-601~G-604 | LSP验证 |

### Skills (skills/*)

执行完整 `checklist-skill.md`

## 执行输出格式

```
Plugin审计执行证据:
- Plugin特定: 15项检查, N个问题
- 命名: 10项检查, M个问题
- 引用: 6项检查, K个问题
- 结构: 5项检查, L个问题
- Prompt质量: 9项检查, J个问题
- 安全: 7项检查, H个问题
- 运行时: 7项检查, I个问题
- 格式: 4项检查, O个问题
- 语言: 3项检查, Q个问题

组件检查:
- Commands: X个命令, Y个问题
- Agents: X个agent, Y个问题
- Hooks: X个hook, Y个问题
- MCP: X个服务器, Y个问题
- LSP: X个服务器, Y个问题
- Skills: X个skill, Y个问题
```
